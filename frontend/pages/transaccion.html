<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/transaccion.css">
    <title>Transacciones</title>
</head>
<body>
    <div id="header"></div>

    <main>
        <!-- Botones para crear categoria o transaccion -->
            

        <div class = "transacciones-options">
            <h1>TRANSACCIONES</h1>
            <div class="tituloFiltro">
                
                
                 <div class="opciones-izq">
                    <!-- Filtrar por ingreso o gasto -->
                    <select id="filtroTipo">
                    <option value="Todos">Todas las transacciones</option>
                    <option value="Ingreso">Ingresos</option>
                    <option value="Gasto">Gastos</option>
                </select>
                <select id="filtroCategoria">
                    <option value="">Todas las categorías</option> 
                </select>

                <!-- Filtrar por monto -->
                <div class="monto-slider">
                    <label>Monto máximo: $<span id="valorMontoMax">0</span></label>
                    <input type="range" id="filtroMontoMax" min="0" step="0.01">
                </div>
                 </div>
                

                <!-- Filtrar por fecha -->
                 <div class="fecha-filtros">
                    <div class="fechaInput">
                        <label for="filtroFechaDesde">Desde:</label>
                        <input type="date" id="filtroFechaDesde">
                    </div>
                    <div class="fechaInput">
                        <label for="filtroFechaHasta">Hasta:</label>
                        <input type="date" id="filtroFechaHasta">
                    </div>
                 </div> 

            </div>

            
        </div>

        <div class = "botonesMainContainer" >
                <div class = "aplicarFiltrosContainer">
                    <button id="aplicarFiltrosBtn">Aplicar filtros</button>
                    <button id="limpiarBtn" class="limpiarFiltroBtn" ></button>
                </div>

                <div class="botonesCrear">
                    <button id = "crearCategoriaBtn">Nueva categoria</button>
                    <button id = "crearTransaccionBtn">Nueva transaccion</button>
                </div>
        </div>
        

        <!-- Esto se rellena dinamicamente con JS -->
        <div id="lista-transacciones" class="lista-transacciones"></div> 

    </main>

    <!-- POPUP PARA CREAR CATEGORÍA -->
    <div id="popupCategoria" class="popup-overlay hidden">
        <div class="popup-contenido">
            <div class="popup-header">
                <h2>Nueva Categoría</h2>
                <button class="popup-cerrar" onclick="cerrarPopupCategoria()">&times;</button>
            </div>
            <form id="formCategoria" class="popup-form">
                <div class="form-grupo">
                    <label for="nombreCategoria">Nombre de la categoría:</label>
                    <input type="text" id="nombreCategoria" placeholder="Ej: Comida, Transporte" required>
                </div>
                <div class="form-grupo">
                    <label for="tipoCategoria">Tipo:</label>
                    <select id="tipoCategoria" required>
                        <option value="">Selecciona un tipo</option>
                        <option value="Ingreso">Ingreso</option>
                        <option value="Gasto">Gasto</option>
                    </select>
                </div>
                <div class="popup-botones">
                    <button type="button" class="btn-cancelar" onclick="cerrarPopupCategoria()">Cancelar</button>
                    <button type="submit" class="btn-guardar">Crear Categoría</button>
                </div>
            </form>
        </div>
    </div>

    <!-- POPUP PARA CREAR TRANSACCIÓN -->
     <!-- Los metodos cerrarPopup y abrirPopup se encuentran en el archivo popups.js y remueven el hidden de la clase -->
    <div id="popupTransaccion" class="popup-overlay hidden">
        <div class="popup-contenido">
            <div class="popup-header">
                <h2>Nueva Transacción</h2>
                <button class="popup-cerrar" onclick="cerrarPopupTransaccion()">&times;</button>
            </div>
            
            <form id="formTransaccion" class="popup-form">
                <div class="form-grupo">
                    <label for="tipoTransaccion">Tipo:</label>
                    <select id="tipoTransaccion" required>
                        <option value="">Selecciona un tipo</option>
                        <option value="Ingreso">Ingreso</option>
                        <option value="Gasto">Gasto</option>
                    </select>
                </div>
                
                <div class="form-grupo">
                    <label for="categoriaTransaccion">Categoría:</label>
                    <select id="categoriaTransaccion" required>
                        <option value="">Selecciona una categoría</option>
                    </select>   
                </div>
                <div class="form-grupo">
                    <label for="descripcionTransaccion">Descripción:</label>
                    <input type="text" id="descripcionTransaccion" placeholder="Descripción de la transacción" required>
                </div>
                <div class="form-grupo">
                    <label for="montoTransaccion">Monto:</label>
                    <input type="number" id="montoTransaccion" placeholder="0.00" step="0.01" min="0" required>
                </div>
                <div class="form-grupo">
                    <label for="fechaTransaccion">Fecha:</label>
                    <input type="date" id="fechaTransaccion" required>
                </div>
                <div class="popup-botones">
                    <button type="button" class="btn-cancelar" onclick="cerrarPopupTransaccion()">Cancelar</button>
                    <button type="submit" class="btn-guardar">Crear Transacción</button>
                </div>
            </form>
        </div>
    </div>

    <!-- POPUP PARA MODIFICAR TRANSACCIÓN -->
    <div id="popupModificarTransaccion" class="popup-overlay hidden">
        <div class="popup-contenido">
            <div class="popup-header">
                <h2>Modificar Transacción</h2>
                <button class="popup-cerrar" onclick="cerrarPopupModificarTransaccion()">&times;</button> 
            </div>
            
            <form id="formModificarTransaccion" class="popup-form">
                <div class="form-grupo">
                    <label for="tipoModificar">Tipo:</label>
                    <select id="tipoModificar" required>
                        <option value="">Selecciona un tipo</option>
                        <option value="Ingreso">Ingreso</option>
                        <option value="Gasto">Gasto</option>
                    </select>
                </div>
                
                <div class="form-grupo">
                    <label for="categoriaModificar">Categoría:</label>
                    <select id="categoriaModificar" required>
                        <option value="">Selecciona una categoría</option>
                    </select>   
                </div>
                <div class="form-grupo">
                    <label for="descripcionModificar">Descripción:</label>
                    <input type="text" id="descripcionModificar" placeholder="Descripción de la transacción" required>
                </div>
                <div class="form-grupo">
                    <label for="montoModificar">Monto:</label>
                    <input type="number" id="montoModificar" placeholder="0.00" step="0.01" min="0" required>
                </div>
                <div class="form-grupo">
                    <label for="fechaModificar">Fecha:</label>
                    <input type="date" id="fechaModificar" required>
                </div>
                <div class="popup-botones">
                    <button type="button" class="btn-cancelar" onclick="cerrarPopupModificarTransaccion()">Cancelar</button>
                    <button type="submit" class="btn-guardar">Actualizar Transacción</button>
                </div>
            </form>
        </div>
    </div>

    <div id="footer"></div>

    <div id="popup-container"></div>

    <script src="../js/CargarPopup.js"></script>
    <script src="../js/CargaLayoutGeneral.js"></script>
    <script src="../js/PagesJS/transaccionesJS/transaccionesAPI.js"></script>
    <script src="../js/PagesJS/transaccionesJS/popups.js"></script>
    <script src="../js/PagesJS/transaccionesJS/transaccionesVisual.js"></script>
</body>
</html>